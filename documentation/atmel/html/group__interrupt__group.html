<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Atmel Radio: Global interrupt management</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Atmel Radio
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Global interrupt management</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__deprecated__group.html">Deprecated interrupt definitions</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2b5f1a58b98aea52fbe094636054d910"></a><!-- doxytag: member="interrupt_group::cpu_irq_enter_critical" ref="ga2b5f1a58b98aea52fbe094636054d910" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>cpu_irq_enter_critical</b> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad9a7e953e4e3eb6bde58eb1c81092b43"></a><!-- doxytag: member="interrupt_group::cpu_irq_leave_critical" ref="gad9a7e953e4e3eb6bde58eb1c81092b43" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>cpu_irq_leave_critical</b> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga18a272af1cdb2009183461e1647f4e86"></a><!-- doxytag: member="interrupt_group::g_interrupt_enabled" ref="ga18a272af1cdb2009183461e1647f4e86" args="" -->
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>g_interrupt_enabled</b></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Interrupt Service Routine definition</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga0da0a19156773eca7070722f26ff66a6">ISR</a>(func)&#160;&#160;&#160;void func (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Define service routine.  <a href="#ga0da0a19156773eca7070722f26ff66a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga931b667f6490ad3d8905fa25bebb24b1">irq_initialize_vectors</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize interrupt vectors.  <a href="#ga931b667f6490ad3d8905fa25bebb24b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#gaa746642b1132af054826fb169f541965">irq_register_handler</a>(int_num, int_prio)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Register handler for interrupt.  <a href="#gaa746642b1132af054826fb169f541965"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Global interrupt flags</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9aa1f52defc97531b6343233abeea613"></a><!-- doxytag: member="interrupt_group::irqflags_t" ref="ga9aa1f52defc97531b6343233abeea613" args="" -->
typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Type used for holding state of interrupt flag. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#gae4922a4bd8ba4150211fbc7f2302403c">cpu_irq_enable</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable interrupts globally.  <a href="#gae4922a4bd8ba4150211fbc7f2302403c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga7b77391ed86e2e027f9ee1dd99a06980">cpu_irq_disable</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable interrupts globally.  <a href="#ga7b77391ed86e2e027f9ee1dd99a06980"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#gae1545a2473614564550b9c4015c94978">cpu_irq_is_enabled</a>()&#160;&#160;&#160;(__get_PRIMASK() == 0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if interrupts are globally enabled.  <a href="#gae1545a2473614564550b9c4015c94978"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>This is a driver for global enabling and disabling of interrupts. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga7b77391ed86e2e027f9ee1dd99a06980"></a><!-- doxytag: member="interrupt_sam_nvic.h::cpu_irq_disable" ref="ga7b77391ed86e2e027f9ee1dd99a06980" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__interrupt__group.html#ga7b77391ed86e2e027f9ee1dd99a06980">cpu_irq_disable</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                       \
                __disable_irq();                       \
                __DMB();                               \
                g_interrupt_enabled = <span class="keyword">false</span>;           \
        } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Disable interrupts globally. </p>

</div>
</div>
<a class="anchor" id="gae4922a4bd8ba4150211fbc7f2302403c"></a><!-- doxytag: member="interrupt_sam_nvic.h::cpu_irq_enable" ref="gae4922a4bd8ba4150211fbc7f2302403c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__interrupt__group.html#gae4922a4bd8ba4150211fbc7f2302403c">cpu_irq_enable</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                       \
                g_interrupt_enabled = <span class="keyword">true</span>;            \
                __DMB();                               \
                __enable_irq();                        \
        } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Enable interrupts globally. </p>

</div>
</div>
<a class="anchor" id="gae1545a2473614564550b9c4015c94978"></a><!-- doxytag: member="interrupt_sam_nvic.h::cpu_irq_is_enabled" ref="gae1545a2473614564550b9c4015c94978" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__interrupt__group.html#gae1545a2473614564550b9c4015c94978">cpu_irq_is_enabled</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(__get_PRIMASK() == 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if interrupts are globally enabled. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if interrupts are enabled. </dd></dl>

</div>
</div>
<a class="anchor" id="ga931b667f6490ad3d8905fa25bebb24b1"></a><!-- doxytag: member="interrupt_sam_nvic.h::irq_initialize_vectors" ref="ga931b667f6490ad3d8905fa25bebb24b1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__interrupt__group.html#ga931b667f6490ad3d8905fa25bebb24b1">irq_initialize_vectors</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                             \
        } <span class="keywordflow">while</span>(0)
</pre></div>
<p>Initialize interrupt vectors. </p>
<p>For NVIC the interrupt vectors are put in vector table. So nothing to do to initialize them, except defined the vector function with right name.</p>
<p>This must be called prior to <a class="el" href="group__interrupt__group.html#gaa746642b1132af054826fb169f541965">irq_register_handler</a>. </p>

</div>
</div>
<a class="anchor" id="gaa746642b1132af054826fb169f541965"></a><!-- doxytag: member="interrupt_sam_nvic.h::irq_register_handler" ref="gaa746642b1132af054826fb169f541965" args="(int_num, int_prio)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__interrupt__group.html#gaa746642b1132af054826fb169f541965">irq_register_handler</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">int_num, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">int_prio&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="group___c_m_s_i_s___core___n_v_i_c_functions.html#ga332e10ef9605dc6eb10b9e14511930f8" title="Clear Pending Interrupt.">NVIC_ClearPendingIRQ</a>(    (<a class="code" href="group___s_a_m_r21_e16_a__cmsis.html#gac3af4a32370fb28c4ade8bf2add80251">IRQn_Type</a>)int_num);                      \
        NVIC_SetPriority(    (<a class="code" href="group___s_a_m_r21_e16_a__cmsis.html#gac3af4a32370fb28c4ade8bf2add80251">IRQn_Type</a>)int_num, int_prio);                \
        NVIC_EnableIRQ(      (<a class="code" href="group___s_a_m_r21_e16_a__cmsis.html#gac3af4a32370fb28c4ade8bf2add80251">IRQn_Type</a>)int_num);                          \
</pre></div>
<p>Register handler for interrupt. </p>
<p>For NVIC the interrupt vectors are put in vector table. So nothing to do to register them, except defined the vector function with right name.</p>
<p>Usage: </p>
<div class="fragment"><pre class="fragment">        <a class="code" href="group__interrupt__group.html#ga931b667f6490ad3d8905fa25bebb24b1" title="Initialize interrupt vectors.">irq_initialize_vectors</a>();
        <a class="code" href="group__interrupt__group.html#gaa746642b1132af054826fb169f541965" title="Register handler for interrupt.">irq_register_handler</a>(foo_irq_handler);
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>The function <em>func</em> must be defined with the <a class="el" href="group__interrupt__group.html#ga0da0a19156773eca7070722f26ff66a6">ISR</a> macro. </dd>
<dd>
The functions prototypes can be found in the device exception header files (exceptions.h). </dd></dl>

</div>
</div>
<a class="anchor" id="ga0da0a19156773eca7070722f26ff66a6"></a><!-- doxytag: member="interrupt_sam_nvic.h::ISR" ref="ga0da0a19156773eca7070722f26ff66a6" args="(func)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__interrupt__group.html#ga0da0a19156773eca7070722f26ff66a6">ISR</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">func</td><td>)</td>
          <td>&#160;&#160;&#160;void func (void)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define service routine. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>For NVIC devices the interrupt service routines are predefined to add to vector table in binary generation, so there is no service register at run time. The routine collections are in exceptions.h.</dd></dl>
<p>Usage: </p>
<div class="fragment"><pre class="fragment">        <a class="code" href="group__interrupt__group.html#ga0da0a19156773eca7070722f26ff66a6" title="Define service routine.">ISR</a>(foo_irq_handler)
        {
             <span class="comment">// Function definition</span>
             ...
        }
</pre></div><dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>Name for the function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 23 2016 20:43:13 for Atmel Radio by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
