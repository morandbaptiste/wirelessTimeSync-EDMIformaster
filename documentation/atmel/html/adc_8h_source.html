<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Atmel Radio: F:/Downloads/Uni/Masters/Project/Software/Atmel/Mbed/Atmel_radio_zip_samr21g18a/Atmel_radio/mbed/TARGET_SAMR21G18A/TARGET_Atmel/TARGET_SAM_CortexM0P/drivers/adc/adc.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Atmel Radio
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">F:/Downloads/Uni/Masters/Project/Software/Atmel/Mbed/Atmel_radio_zip_samr21g18a/Atmel_radio/mbed/TARGET_SAMR21G18A/TARGET_Atmel/TARGET_SAM_CortexM0P/drivers/adc/adc.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="adc_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00043"></a>00043 <span class="comment">/*</span>
<a name="l00044"></a>00044 <span class="comment"> * Support and FAQ: visit &lt;a href=&quot;http://www.atmel.com/design-support/&quot;&gt;Atmel Support&lt;/a&gt;</span>
<a name="l00045"></a>00045 <span class="comment"> */</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#ifndef ADC_H_INCLUDED</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#define ADC_H_INCLUDED</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00415"></a>00415 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00416"></a>00416 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00417"></a>00417 <span class="preprocessor">#endif</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>
<a name="l00419"></a>00419 <span class="preprocessor">#include &lt;compiler.h&gt;</span>
<a name="l00420"></a>00420 <span class="preprocessor">#include &lt;<a class="code" href="system_8h.html" title="SAM System related functionality.">system.h</a>&gt;</span>
<a name="l00421"></a>00421 <span class="preprocessor">#include &lt;<a class="code" href="adc__feature_8h.html" title="SAM ADC functionality.">adc_feature.h</a>&gt;</span>
<a name="l00422"></a>00422 
<a name="l00433"></a><a class="code" href="group__asfdoc__sam0__adc__group.html#gac25e444bb2e1cb312bedf72d2d6ed8e5">00433</a> <span class="preprocessor">#define ADC_STATUS_RESULT_READY  (1UL &lt;&lt; 0)</span>
<a name="l00434"></a>00434 <span class="preprocessor"></span>
<a name="l00435"></a><a class="code" href="group__asfdoc__sam0__adc__group.html#gab1e9bae12e573bd6389051adca1a6db9">00435</a> <span class="preprocessor">#define ADC_STATUS_WINDOW        (1UL &lt;&lt; 1)</span>
<a name="l00436"></a>00436 <span class="preprocessor"></span>
<a name="l00437"></a><a class="code" href="group__asfdoc__sam0__adc__group.html#ga9e05a7398afafa9344c780a0a0e7be9a">00437</a> <span class="preprocessor">#define ADC_STATUS_OVERRUN       (1UL &lt;&lt; 2)</span>
<a name="l00438"></a>00438 <span class="preprocessor"></span>
<a name="l00441"></a>00441 <span class="preprocessor">#if ADC_CALLBACK_MODE == true</span>
<a name="l00442"></a>00442 <span class="preprocessor"></span><span class="preprocessor">#   if (ADC_INST_NUM &gt; 1)</span>
<a name="l00443"></a>00443 <span class="preprocessor"></span><span class="preprocessor">#       define _ADC_INTERRUPT_VECT_NUM(n, unused) \</span>
<a name="l00444"></a>00444 <span class="preprocessor">                        SYSTEM_INTERRUPT_MODULE_ADC##n,</span>
<a name="l00445"></a>00445 <span class="preprocessor"></span>
<a name="l00452"></a>00452 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="group__asfdoc__sam0__system__interrupt__group.html#ga43378e6222cc05290c1a0c6a9ba125cf" title="Table of possible system interrupt/exception vector numbers.">system_interrupt_vector</a> _adc_interrupt_get_interrupt_vector(
<a name="l00453"></a>00453     uint32_t inst_num)
<a name="l00454"></a>00454 {
<a name="l00455"></a>00455     <span class="keyword">static</span> uint8_t adc_interrupt_vectors[<a class="code" href="group___s_a_m_r21_e16_a__base.html#gac539e8e2e65134854344ceb66b3bab64" title="(ADC) Number of instances">ADC_INST_NUM</a>] = {
<a name="l00456"></a>00456         <a class="code" href="group__group__sam0__utils__mrepeat.html#ga42db715ccb877ca87d7903f5783bd104" title="Macro repeat.">MREPEAT</a>(<a class="code" href="group___s_a_m_r21_e16_a__base.html#gac539e8e2e65134854344ceb66b3bab64" title="(ADC) Number of instances">ADC_INST_NUM</a>, _ADC_INTERRUPT_VECT_NUM, 0)
<a name="l00457"></a>00457     };
<a name="l00458"></a>00458 
<a name="l00459"></a>00459     <span class="keywordflow">return</span> (<span class="keyword">enum</span> <a class="code" href="group__asfdoc__sam0__system__interrupt__group.html#ga43378e6222cc05290c1a0c6a9ba125cf" title="Table of possible system interrupt/exception vector numbers.">system_interrupt_vector</a>)adc_interrupt_vectors[inst_num];
<a name="l00460"></a>00460 }
<a name="l00461"></a>00461 <span class="preprocessor">#   endif</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span>
<a name="l00464"></a>00464 <span class="preprocessor">#if !defined(__DOXYGEN__)</span>
<a name="l00465"></a>00465 <span class="preprocessor"></span>uint8_t _adc_get_inst_index(
<a name="l00466"></a>00466     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> hw);
<a name="l00467"></a>00467 <span class="preprocessor">#endif</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>
<a name="l00473"></a>00473 <span class="keyword">enum</span> <a class="code" href="group__group__sam0__utils__status__codes.html#ga751c892e5a46b8e7d282085a5a5bf151">status_code</a> adc_init(
<a name="l00474"></a>00474     <span class="keyword">struct</span> <a class="code" href="structadc__module.html" title="ADC software device instance structure.">adc_module</a> *<span class="keyword">const</span> module_inst,
<a name="l00475"></a>00475     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *hw,
<a name="l00476"></a>00476     <span class="keyword">struct</span> <a class="code" href="structadc__config.html" title="ADC configuration structure.">adc_config</a> *config);
<a name="l00477"></a>00477 
<a name="l00478"></a>00478 <span class="keywordtype">void</span> adc_get_config_defaults(
<a name="l00479"></a>00479     <span class="keyword">struct</span> <a class="code" href="structadc__config.html" title="ADC configuration structure.">adc_config</a> *<span class="keyword">const</span> config);
<a name="l00480"></a>00480 
<a name="l00481"></a>00481 <span class="preprocessor">#if (SAMD) || (SAMR21)</span>
<a name="l00482"></a>00482 <span class="preprocessor"></span><span class="keywordtype">void</span> adc_regular_ain_channel(
<a name="l00483"></a>00483     uint32_t *pin_array, uint8_t size);
<a name="l00484"></a>00484 <span class="preprocessor">#endif</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span>
<a name="l00507"></a>00507 <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t adc_get_status(
<a name="l00508"></a>00508     <span class="keyword">struct</span> <a class="code" href="structadc__module.html" title="ADC software device instance structure.">adc_module</a> *<span class="keyword">const</span> module_inst)
<a name="l00509"></a>00509 {
<a name="l00510"></a>00510     <span class="comment">/* Sanity check arguments */</span>
<a name="l00511"></a>00511     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00512"></a>00512     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> <a class="code" href="structadc__module.html" title="ADC software device instance structure.">adc_module</a> = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00515"></a>00515 
<a name="l00516"></a>00516     uint32_t int_flags = adc_module-&gt;<a class="code" href="struct_adc.html#a1b221db015a728adf157f6d130967476" title="Offset: 0x18 (R/W 8) Interrupt Flag Status and Clear.">INTFLAG</a>.<a class="code" href="union_a_d_c___i_n_t_f_l_a_g___type.html#a66d77e3487777c8a323038d890aae236">reg</a>;
<a name="l00517"></a>00517 
<a name="l00518"></a>00518     uint32_t status_flags = 0;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520     <span class="comment">/* Check for ADC Result Ready */</span>
<a name="l00521"></a>00521     <span class="keywordflow">if</span> (int_flags &amp; ADC_INTFLAG_RESRDY) {
<a name="l00522"></a>00522         status_flags |= <a class="code" href="group__asfdoc__sam0__adc__group.html#gac25e444bb2e1cb312bedf72d2d6ed8e5">ADC_STATUS_RESULT_READY</a>;
<a name="l00523"></a>00523     }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525     <span class="comment">/* Check for ADC Window Match */</span>
<a name="l00526"></a>00526     <span class="keywordflow">if</span> (int_flags &amp; ADC_INTFLAG_WINMON) {
<a name="l00527"></a>00527         status_flags |= <a class="code" href="group__asfdoc__sam0__adc__group.html#gab1e9bae12e573bd6389051adca1a6db9">ADC_STATUS_WINDOW</a>;
<a name="l00528"></a>00528     }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530     <span class="comment">/* Check for ADC Overrun */</span>
<a name="l00531"></a>00531     <span class="keywordflow">if</span> (int_flags &amp; ADC_INTFLAG_OVERRUN) {
<a name="l00532"></a>00532         status_flags |= <a class="code" href="group__asfdoc__sam0__adc__group.html#ga9e05a7398afafa9344c780a0a0e7be9a">ADC_STATUS_OVERRUN</a>;
<a name="l00533"></a>00533     }
<a name="l00534"></a>00534 
<a name="l00535"></a>00535     <span class="keywordflow">return</span> status_flags;
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00546"></a>00546 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_clear_status(
<a name="l00547"></a>00547     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00548"></a>00548     <span class="keyword">const</span> uint32_t status_flags)
<a name="l00549"></a>00549 {
<a name="l00550"></a>00550     <span class="comment">/* Sanity check arguments */</span>
<a name="l00551"></a>00551     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00552"></a>00552     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00553"></a>00553 
<a name="l00554"></a>00554     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00555"></a>00555 
<a name="l00556"></a>00556     uint32_t int_flags = 0;
<a name="l00557"></a>00557 
<a name="l00558"></a>00558     <span class="comment">/* Check for ADC Result Ready */</span>
<a name="l00559"></a>00559     <span class="keywordflow">if</span> (status_flags &amp; <a class="code" href="group__asfdoc__sam0__adc__group.html#gac25e444bb2e1cb312bedf72d2d6ed8e5">ADC_STATUS_RESULT_READY</a>) {
<a name="l00560"></a>00560         int_flags |= ADC_INTFLAG_RESRDY;
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562 
<a name="l00563"></a>00563     <span class="comment">/* Check for ADC Window Match */</span>
<a name="l00564"></a>00564     <span class="keywordflow">if</span> (status_flags &amp; <a class="code" href="group__asfdoc__sam0__adc__group.html#gab1e9bae12e573bd6389051adca1a6db9">ADC_STATUS_WINDOW</a>) {
<a name="l00565"></a>00565         int_flags |= ADC_INTFLAG_WINMON;
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568     <span class="comment">/* Check for ADC Overrun */</span>
<a name="l00569"></a>00569     <span class="keywordflow">if</span> (status_flags &amp; <a class="code" href="group__asfdoc__sam0__adc__group.html#ga9e05a7398afafa9344c780a0a0e7be9a">ADC_STATUS_OVERRUN</a>) {
<a name="l00570"></a>00570         int_flags |= ADC_INTFLAG_OVERRUN;
<a name="l00571"></a>00571     }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573     <span class="comment">/* Clear interrupt flag */</span>
<a name="l00574"></a>00574     adc_module-&gt;<a class="code" href="struct_adc.html#a1b221db015a728adf157f6d130967476" title="Offset: 0x18 (R/W 8) Interrupt Flag Status and Clear.">INTFLAG</a>.<a class="code" href="union_a_d_c___i_n_t_f_l_a_g___type.html#a66d77e3487777c8a323038d890aae236">reg</a> = int_flags;
<a name="l00575"></a>00575 }
<a name="l00591"></a>00591 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> <a class="code" href="group__group__sam0__utils__status__codes.html#ga751c892e5a46b8e7d282085a5a5bf151">status_code</a> adc_enable(
<a name="l00592"></a>00592     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst)
<a name="l00593"></a>00593 {
<a name="l00594"></a>00594     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00595"></a>00595     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00596"></a>00596 
<a name="l00597"></a>00597     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00600"></a>00600         <span class="comment">/* Wait for synchronization */</span>
<a name="l00601"></a>00601     }
<a name="l00602"></a>00602 
<a name="l00603"></a>00603 <span class="preprocessor">#if ADC_CALLBACK_MODE == true</span>
<a name="l00604"></a>00604 <span class="preprocessor"></span><span class="preprocessor">#   if (ADC_INST_NUM &gt; 1)</span>
<a name="l00605"></a>00605 <span class="preprocessor"></span>    system_interrupt_enable(_adc_interrupt_get_interrupt_vector(
<a name="l00606"></a>00606                                 _adc_get_inst_index(adc_module)));
<a name="l00607"></a>00607 <span class="preprocessor">#   elif (SAMC20)</span>
<a name="l00608"></a>00608 <span class="preprocessor"></span>    system_interrupt_enable(SYSTEM_INTERRUPT_MODULE_ADC0);
<a name="l00609"></a>00609 <span class="preprocessor">#       else</span>
<a name="l00610"></a>00610 <span class="preprocessor"></span>    system_interrupt_enable(<a class="code" href="group__asfdoc__sam0__system__interrupt__group.html#gga43378e6222cc05290c1a0c6a9ba125cfabe508bdf9df07e4f95b69118525cc3c6">SYSTEM_INTERRUPT_MODULE_ADC</a>);
<a name="l00611"></a>00611 <span class="preprocessor">#   endif</span>
<a name="l00612"></a>00612 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00613"></a>00613 <span class="preprocessor"></span>
<a name="l00614"></a>00614     adc_module-&gt;<a class="code" href="struct_adc.html#ab3df0d5e21bc31d52cd54efb82840a84" title="Offset: 0x00 (R/W 8) Control A.">CTRLA</a>.<a class="code" href="union_a_d_c___c_t_r_l_a___type.html#a7777001c0e893064fb142061c64223bb">reg</a> |= ADC_CTRLA_ENABLE;
<a name="l00615"></a>00615 
<a name="l00616"></a>00616     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00617"></a>00617         <span class="comment">/* Wait for synchronization */</span>
<a name="l00618"></a>00618     }
<a name="l00619"></a>00619     <span class="keywordflow">return</span> STATUS_OK;
<a name="l00620"></a>00620 }
<a name="l00621"></a>00621 
<a name="l00629"></a>00629 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> <a class="code" href="group__group__sam0__utils__status__codes.html#ga751c892e5a46b8e7d282085a5a5bf151">status_code</a> adc_disable(
<a name="l00630"></a>00630     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst)
<a name="l00631"></a>00631 {
<a name="l00632"></a>00632     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00633"></a>00633     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00634"></a>00634 
<a name="l00635"></a>00635     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00636"></a>00636 
<a name="l00637"></a>00637 <span class="preprocessor">#if ADC_CALLBACK_MODE == true</span>
<a name="l00638"></a>00638 <span class="preprocessor"></span><span class="preprocessor">#   if (ADC_INST_NUM &gt; 1)</span>
<a name="l00639"></a>00639 <span class="preprocessor"></span>    system_interrupt_disable(_adc_interrupt_get_interrupt_vector(
<a name="l00640"></a>00640                                  _adc_get_inst_index(adc_module)));
<a name="l00641"></a>00641 <span class="preprocessor">#   elif (SAMC20)</span>
<a name="l00642"></a>00642 <span class="preprocessor"></span>    system_interrupt_disable(SYSTEM_INTERRUPT_MODULE_ADC0);
<a name="l00643"></a>00643 <span class="preprocessor">#       else</span>
<a name="l00644"></a>00644 <span class="preprocessor"></span>    system_interrupt_disable(<a class="code" href="group__asfdoc__sam0__system__interrupt__group.html#gga43378e6222cc05290c1a0c6a9ba125cfabe508bdf9df07e4f95b69118525cc3c6">SYSTEM_INTERRUPT_MODULE_ADC</a>);
<a name="l00645"></a>00645 <span class="preprocessor">#   endif</span>
<a name="l00646"></a>00646 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00647"></a>00647 <span class="preprocessor"></span>
<a name="l00648"></a>00648     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00649"></a>00649         <span class="comment">/* Wait for synchronization */</span>
<a name="l00650"></a>00650     }
<a name="l00651"></a>00651 
<a name="l00652"></a>00652     adc_module-&gt;<a class="code" href="struct_adc.html#ab3df0d5e21bc31d52cd54efb82840a84" title="Offset: 0x00 (R/W 8) Control A.">CTRLA</a>.<a class="code" href="union_a_d_c___c_t_r_l_a___type.html#a7777001c0e893064fb142061c64223bb">reg</a> &amp;= ~ADC_CTRLA_ENABLE;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00655"></a>00655         <span class="comment">/* Wait for synchronization */</span>
<a name="l00656"></a>00656     }
<a name="l00657"></a>00657     <span class="keywordflow">return</span> STATUS_OK;
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 
<a name="l00668"></a>00668 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> <a class="code" href="group__group__sam0__utils__status__codes.html#ga751c892e5a46b8e7d282085a5a5bf151">status_code</a> adc_reset(
<a name="l00669"></a>00669     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst)
<a name="l00670"></a>00670 {
<a name="l00671"></a>00671     <span class="comment">/* Sanity check arguments */</span>
<a name="l00672"></a>00672     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00673"></a>00673     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00674"></a>00674 
<a name="l00675"></a>00675     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00676"></a>00676 
<a name="l00677"></a>00677     <span class="comment">/* Disable to make sure the pipeline is flushed before reset */</span>
<a name="l00678"></a>00678     adc_disable(module_inst);
<a name="l00679"></a>00679 
<a name="l00680"></a>00680     <span class="comment">/* Software reset the module */</span>
<a name="l00681"></a>00681     adc_module-&gt;<a class="code" href="struct_adc.html#ab3df0d5e21bc31d52cd54efb82840a84" title="Offset: 0x00 (R/W 8) Control A.">CTRLA</a>.<a class="code" href="union_a_d_c___c_t_r_l_a___type.html#a7777001c0e893064fb142061c64223bb">reg</a> |= ADC_CTRLA_SWRST;
<a name="l00682"></a>00682 
<a name="l00683"></a>00683     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00684"></a>00684         <span class="comment">/* Wait for synchronization */</span>
<a name="l00685"></a>00685     }
<a name="l00686"></a>00686     <span class="keywordflow">return</span> STATUS_OK;
<a name="l00687"></a>00687 }
<a name="l00688"></a>00688 
<a name="l00689"></a>00689 
<a name="l00701"></a>00701 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_enable_events(
<a name="l00702"></a>00702     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00703"></a>00703     <span class="keyword">struct</span> <a class="code" href="structadc__events.html" title="ADC event enable/disable structure.">adc_events</a> *<span class="keyword">const</span> events)
<a name="l00704"></a>00704 {
<a name="l00705"></a>00705     <span class="comment">/* Sanity check arguments */</span>
<a name="l00706"></a>00706     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00707"></a>00707     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00708"></a>00708     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(events);
<a name="l00709"></a>00709 
<a name="l00710"></a>00710     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00711"></a>00711 
<a name="l00712"></a>00712     uint32_t event_mask = 0;
<a name="l00713"></a>00713 
<a name="l00714"></a>00714     <span class="comment">/* Configure Window Monitor event */</span>
<a name="l00715"></a>00715     <span class="keywordflow">if</span> (events-&gt;<a class="code" href="structadc__events.html#a60695e351893456f55735b8a773e0471">generate_event_on_window_monitor</a>) {
<a name="l00716"></a>00716         event_mask |= ADC_EVCTRL_WINMONEO;
<a name="l00717"></a>00717     }
<a name="l00718"></a>00718 
<a name="l00719"></a>00719     <span class="comment">/* Configure Result Ready event */</span>
<a name="l00720"></a>00720     <span class="keywordflow">if</span> (events-&gt;<a class="code" href="structadc__events.html#a7d649897bf882114b55934f2a154c3f6">generate_event_on_conversion_done</a>) {
<a name="l00721"></a>00721         event_mask |= ADC_EVCTRL_RESRDYEO;
<a name="l00722"></a>00722     }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724     adc_module-&gt;<a class="code" href="struct_adc.html#a09f9dfbbadbc51a36cf4f8c0fcb41e35" title="Offset: 0x14 (R/W 8) Event Control.">EVCTRL</a>.<a class="code" href="union_a_d_c___e_v_c_t_r_l___type.html#a6f1b45a79d4631f72e1abebd7cd91824">reg</a> |= event_mask;
<a name="l00725"></a>00725 }
<a name="l00726"></a>00726 
<a name="l00738"></a>00738 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_disable_events(
<a name="l00739"></a>00739     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00740"></a>00740     <span class="keyword">struct</span> <a class="code" href="structadc__events.html" title="ADC event enable/disable structure.">adc_events</a> *<span class="keyword">const</span> events)
<a name="l00741"></a>00741 {
<a name="l00742"></a>00742     <span class="comment">/* Sanity check arguments */</span>
<a name="l00743"></a>00743     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00744"></a>00744     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00745"></a>00745     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(events);
<a name="l00746"></a>00746 
<a name="l00747"></a>00747     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00748"></a>00748 
<a name="l00749"></a>00749     uint32_t event_mask = 0;
<a name="l00750"></a>00750 
<a name="l00751"></a>00751     <span class="comment">/* Configure Window Monitor event */</span>
<a name="l00752"></a>00752     <span class="keywordflow">if</span> (events-&gt;<a class="code" href="structadc__events.html#a60695e351893456f55735b8a773e0471">generate_event_on_window_monitor</a>) {
<a name="l00753"></a>00753         event_mask |= ADC_EVCTRL_WINMONEO;
<a name="l00754"></a>00754     }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756     <span class="comment">/* Configure Result Ready event */</span>
<a name="l00757"></a>00757     <span class="keywordflow">if</span> (events-&gt;<a class="code" href="structadc__events.html#a7d649897bf882114b55934f2a154c3f6">generate_event_on_conversion_done</a>) {
<a name="l00758"></a>00758         event_mask |= ADC_EVCTRL_RESRDYEO;
<a name="l00759"></a>00759     }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761     adc_module-&gt;<a class="code" href="struct_adc.html#a09f9dfbbadbc51a36cf4f8c0fcb41e35" title="Offset: 0x14 (R/W 8) Event Control.">EVCTRL</a>.<a class="code" href="union_a_d_c___e_v_c_t_r_l___type.html#a6f1b45a79d4631f72e1abebd7cd91824">reg</a> &amp;= ~event_mask;
<a name="l00762"></a>00762 }
<a name="l00763"></a>00763 
<a name="l00771"></a>00771 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_start_conversion(
<a name="l00772"></a>00772     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst)
<a name="l00773"></a>00773 {
<a name="l00774"></a>00774     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00775"></a>00775     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00776"></a>00776 
<a name="l00777"></a>00777     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00778"></a>00778 
<a name="l00779"></a>00779     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00780"></a>00780         <span class="comment">/* Wait for synchronization */</span>
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782 
<a name="l00783"></a>00783     adc_module-&gt;<a class="code" href="struct_adc.html#ad3f43aead8dc3b79cb34f4afb5ccdecc" title="Offset: 0x0C (R/W 8) Software Trigger.">SWTRIG</a>.<a class="code" href="union_a_d_c___s_w_t_r_i_g___type.html#a8e558b88b59ecbb37cd3e24e3fd7a4ff">reg</a> |= ADC_SWTRIG_START;
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00786"></a>00786         <span class="comment">/* Wait for synchronization */</span>
<a name="l00787"></a>00787     }
<a name="l00788"></a>00788 }
<a name="l00789"></a>00789 
<a name="l00804"></a>00804 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> <a class="code" href="group__group__sam0__utils__status__codes.html#ga751c892e5a46b8e7d282085a5a5bf151">status_code</a> adc_read(
<a name="l00805"></a>00805     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00806"></a>00806     uint16_t *result)
<a name="l00807"></a>00807 {
<a name="l00808"></a>00808     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00809"></a>00809     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00810"></a>00810     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(result);
<a name="l00811"></a>00811 
<a name="l00812"></a>00812     <span class="keywordflow">if</span> (!(adc_get_status(module_inst) &amp; ADC_STATUS_RESULT_READY)) {
<a name="l00813"></a>00813         <span class="comment">/* Result not ready */</span>
<a name="l00814"></a>00814         <span class="keywordflow">return</span> STATUS_BUSY;
<a name="l00815"></a>00815     }
<a name="l00816"></a>00816 
<a name="l00817"></a>00817     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00818"></a>00818 
<a name="l00819"></a>00819 <span class="preprocessor">#if (SAMD) || (SAMR21)</span>
<a name="l00820"></a>00820 <span class="preprocessor"></span>    <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00821"></a>00821         <span class="comment">/* Wait for synchronization */</span>
<a name="l00822"></a>00822     }
<a name="l00823"></a>00823 <span class="preprocessor">#endif</span>
<a name="l00824"></a>00824 <span class="preprocessor"></span>
<a name="l00825"></a>00825     <span class="comment">/* Get ADC result */</span>
<a name="l00826"></a>00826     *result = adc_module-&gt;<a class="code" href="struct_adc.html#a04ab9cba3b770ef91a881a4b199b5da0" title="Offset: 0x1A (R/ 16) Result.">RESULT</a>.<a class="code" href="union_a_d_c___r_e_s_u_l_t___type.html#a6c30a9f746ab8eb2454d3ab6a0e933b4">reg</a>;
<a name="l00827"></a>00827 
<a name="l00828"></a>00828     <span class="comment">/* Reset ready flag */</span>
<a name="l00829"></a>00829     adc_clear_status(module_inst, ADC_STATUS_RESULT_READY);
<a name="l00830"></a>00830 
<a name="l00831"></a>00831     <span class="keywordflow">if</span> (adc_get_status(module_inst) &amp; <a class="code" href="group__asfdoc__sam0__adc__group.html#ga9e05a7398afafa9344c780a0a0e7be9a">ADC_STATUS_OVERRUN</a>) {
<a name="l00832"></a>00832         adc_clear_status(module_inst, ADC_STATUS_OVERRUN);
<a name="l00833"></a>00833         <span class="keywordflow">return</span> STATUS_ERR_OVERFLOW;
<a name="l00834"></a>00834     }
<a name="l00835"></a>00835 
<a name="l00836"></a>00836     <span class="keywordflow">return</span> STATUS_OK;
<a name="l00837"></a>00837 }
<a name="l00838"></a>00838 
<a name="l00855"></a>00855 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_flush(
<a name="l00856"></a>00856     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst)
<a name="l00857"></a>00857 {
<a name="l00858"></a>00858     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00859"></a>00859     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00860"></a>00860 
<a name="l00861"></a>00861     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00862"></a>00862 
<a name="l00863"></a>00863     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00864"></a>00864         <span class="comment">/* Wait for synchronization */</span>
<a name="l00865"></a>00865     }
<a name="l00866"></a>00866 
<a name="l00867"></a>00867     adc_module-&gt;<a class="code" href="struct_adc.html#ad3f43aead8dc3b79cb34f4afb5ccdecc" title="Offset: 0x0C (R/W 8) Software Trigger.">SWTRIG</a>.<a class="code" href="union_a_d_c___s_w_t_r_i_g___type.html#a8e558b88b59ecbb37cd3e24e3fd7a4ff">reg</a> |= ADC_SWTRIG_FLUSH;
<a name="l00868"></a>00868 
<a name="l00869"></a>00869     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00870"></a>00870         <span class="comment">/* Wait for synchronization */</span>
<a name="l00871"></a>00871     }
<a name="l00872"></a>00872 }
<a name="l00873"></a>00873 <span class="keywordtype">void</span> adc_set_window_mode(
<a name="l00874"></a>00874     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00875"></a>00875     <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="group__asfdoc__sam0__adc__group.html#ga720c2e38565e27d2fd31941fede1f743" title="ADC window monitor mode enum.">adc_window_mode</a> window_mode,
<a name="l00876"></a>00876     <span class="keyword">const</span> int16_t window_lower_value,
<a name="l00877"></a>00877     <span class="keyword">const</span> int16_t window_upper_value);
<a name="l00878"></a>00878 
<a name="l00887"></a>00887 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_set_positive_input(
<a name="l00888"></a>00888     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00889"></a>00889     <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="group__asfdoc__sam0__adc__group.html#ga7df963d2d3118abe65841e0886764002" title="ADC positive MUX input selection enum.">adc_positive_input</a> positive_input)
<a name="l00890"></a>00890 {
<a name="l00891"></a>00891     <span class="comment">/* Sanity check arguments */</span>
<a name="l00892"></a>00892     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00893"></a>00893     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00894"></a>00894 
<a name="l00895"></a>00895     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00896"></a>00896 
<a name="l00897"></a>00897     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00898"></a>00898         <span class="comment">/* Wait for synchronization */</span>
<a name="l00899"></a>00899     }
<a name="l00900"></a>00900 
<a name="l00901"></a>00901     <span class="comment">/* Set positive input pin */</span>
<a name="l00902"></a>00902     adc_module-&gt;<a class="code" href="struct_adc.html#a1ad090f498e2ce3d2b6e7b86931a0c7a" title="Offset: 0x10 (R/W 32) Input Control.">INPUTCTRL</a>.<a class="code" href="union_a_d_c___i_n_p_u_t_c_t_r_l___type.html#a17cb467222133feafc7e2cf2997c3bf4">reg</a> =
<a name="l00903"></a>00903         (adc_module-&gt;<a class="code" href="struct_adc.html#a1ad090f498e2ce3d2b6e7b86931a0c7a" title="Offset: 0x10 (R/W 32) Input Control.">INPUTCTRL</a>.<a class="code" href="union_a_d_c___i_n_p_u_t_c_t_r_l___type.html#a17cb467222133feafc7e2cf2997c3bf4">reg</a> &amp; ~ADC_INPUTCTRL_MUXPOS_Msk) |
<a name="l00904"></a>00904         (positive_input);
<a name="l00905"></a>00905 
<a name="l00906"></a>00906     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00907"></a>00907         <span class="comment">/* Wait for synchronization */</span>
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909 }
<a name="l00910"></a>00910 
<a name="l00911"></a>00911 
<a name="l00921"></a>00921 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_set_negative_input(
<a name="l00922"></a>00922     <span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00923"></a>00923     <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="group__asfdoc__sam0__adc__group.html#ga843290f150383271ef2ed82792d76e81" title="ADC negative MUX input selection enum.">adc_negative_input</a> negative_input)
<a name="l00924"></a>00924 {
<a name="l00925"></a>00925     <span class="comment">/* Sanity check arguments */</span>
<a name="l00926"></a>00926     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00927"></a>00927     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00928"></a>00928 
<a name="l00929"></a>00929     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00930"></a>00930 
<a name="l00931"></a>00931     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00932"></a>00932         <span class="comment">/* Wait for synchronization */</span>
<a name="l00933"></a>00933     }
<a name="l00934"></a>00934 
<a name="l00935"></a>00935     <span class="comment">/* Set negative input pin */</span>
<a name="l00936"></a>00936     adc_module-&gt;<a class="code" href="struct_adc.html#a1ad090f498e2ce3d2b6e7b86931a0c7a" title="Offset: 0x10 (R/W 32) Input Control.">INPUTCTRL</a>.<a class="code" href="union_a_d_c___i_n_p_u_t_c_t_r_l___type.html#a17cb467222133feafc7e2cf2997c3bf4">reg</a> =
<a name="l00937"></a>00937         (adc_module-&gt;<a class="code" href="struct_adc.html#a1ad090f498e2ce3d2b6e7b86931a0c7a" title="Offset: 0x10 (R/W 32) Input Control.">INPUTCTRL</a>.<a class="code" href="union_a_d_c___i_n_p_u_t_c_t_r_l___type.html#a17cb467222133feafc7e2cf2997c3bf4">reg</a> &amp; ~ADC_INPUTCTRL_MUXNEG_Msk) |
<a name="l00938"></a>00938         (negative_input);
<a name="l00939"></a>00939 
<a name="l00940"></a>00940     <span class="keywordflow">while</span> (adc_is_syncing(module_inst)) {
<a name="l00941"></a>00941         <span class="comment">/* Wait for synchronization */</span>
<a name="l00942"></a>00942     }
<a name="l00943"></a>00943 }
<a name="l00944"></a>00944 
<a name="l00947"></a>00947 <span class="preprocessor">#if ADC_CALLBACK_MODE == true</span>
<a name="l00948"></a>00948 <span class="preprocessor"></span>
<a name="l00961"></a>00961 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_enable_interrupt(<span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00962"></a>00962                                         <span class="keyword">enum</span> <a class="code" href="group__asfdoc__sam0__adc__group.html#ga1ff1d3ce8d4a69197eeea59389a92959">adc_interrupt_flag</a> interrupt)
<a name="l00963"></a>00963 {
<a name="l00964"></a>00964     <span class="comment">/* Sanity check arguments */</span>
<a name="l00965"></a>00965     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00966"></a>00966     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00967"></a>00967 
<a name="l00968"></a>00968     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00969"></a>00969     <span class="comment">/* Enable interrupt */</span>
<a name="l00970"></a>00970     adc_module-&gt;<a class="code" href="struct_adc.html#a07ae3a5472859656c92b6aaeda6849de" title="Offset: 0x17 (R/W 8) Interrupt Enable Set.">INTENSET</a>.<a class="code" href="union_a_d_c___i_n_t_e_n_s_e_t___type.html#a3bfc0121d10581d4d8bb43f8c46e0c01">reg</a> = interrupt;
<a name="l00971"></a>00971 }
<a name="l00972"></a>00972 
<a name="l00981"></a>00981 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> adc_disable_interrupt(<span class="keyword">struct</span> adc_module *<span class="keyword">const</span> module_inst,
<a name="l00982"></a>00982         <span class="keyword">enum</span> <a class="code" href="group__asfdoc__sam0__adc__group.html#ga1ff1d3ce8d4a69197eeea59389a92959">adc_interrupt_flag</a> interrupt)
<a name="l00983"></a>00983 {
<a name="l00984"></a>00984     <span class="comment">/* Sanity check arguments */</span>
<a name="l00985"></a>00985     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst);
<a name="l00986"></a>00986     <a class="code" href="group__group__sam0__utils.html#gaab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>);
<a name="l00987"></a>00987 
<a name="l00988"></a>00988     <a class="code" href="struct_adc.html" title="ADC hardware registers.">Adc</a> *<span class="keyword">const</span> adc_module = module_inst-&gt;<a class="code" href="structadc__module.html#ae52052a3fdcb78496a6b4eca7edee9eb">hw</a>;
<a name="l00989"></a>00989     <span class="comment">/* Enable interrupt */</span>
<a name="l00990"></a>00990     adc_module-&gt;<a class="code" href="struct_adc.html#a81adb67cdacbd126e0a65f1b555f0221" title="Offset: 0x16 (R/W 8) Interrupt Enable Clear.">INTENCLR</a>.<a class="code" href="union_a_d_c___i_n_t_e_n_c_l_r___type.html#a4d0bec6adb0cbd25103eabcd91a97c3d">reg</a> = interrupt;
<a name="l00991"></a>00991 }
<a name="l00992"></a>00992 
<a name="l00994"></a>00994 <span class="preprocessor">#endif </span><span class="comment">/* ADC_CALLBACK_MODE == true */</span>
<a name="l00995"></a>00995 
<a name="l00996"></a>00996 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00997"></a>00997 <span class="preprocessor"></span>}
<a name="l00998"></a>00998 <span class="preprocessor">#endif</span>
<a name="l00999"></a>00999 <span class="preprocessor"></span>
<a name="l01140"></a>01140 <span class="preprocessor">#endif </span><span class="comment">/* ADC_H_INCLUDED */</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 23 2016 20:43:07 for Atmel Radio by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
